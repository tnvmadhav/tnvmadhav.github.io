<!DOCTYPE html>
<html lang="en" data-mode="dark">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.74.3">
<meta name="theme" content="Color Your World -- gitlab.com/rmaguiar/hugo-theme-color-your-world">
























<title>ðŸ•› Time Progress App | Venu&#39;s Webstrings</title>


<meta name="author" content="T Venu Madhav">



<meta name="robots" content="index follow">
<meta name="referrer" content="no-referrer-when-downgrade">




  
    <link rel="canonical" href="https://tnvmadhav.surge.sh/posts/time-progress-app/">
  








<meta property="og:site_name" content="Venu&#39;s Webstrings">
<meta property="og:title" content="ðŸ•› Time Progress App">

  <meta property="og:url" content="https://tnvmadhav.surge.sh/posts/time-progress-app/">







  
    <meta property="og:image" content="https://tnvmadhav.surge.sh/img/cover_hu21e85976c8e314cc3a56b50e959ccf0c_44070_1200x630_fill_box_smart1_2.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
      <meta property="og:image:alt" content="A placeholder that doesn&#39;t deserve to be described.">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://tnvmadhav.surge.sh/img/cover_hu21e85976c8e314cc3a56b50e959ccf0c_44070_1280x640_fill_box_smart1_2.png">

    
      
    
    
  


  <meta property="og:type" content="article">
  
  
    <meta property="article:published_time" content="2020-10-18">
    <meta property="article:modified_time" content="2020-10-18">
    <meta property="og:updated_time" content="2020-10-18">
  

  
  
  
    <meta name="twitter:creator" content="@TnvMadhav">
  
  

  <meta name="twitter:site" content="@TnvMadhav">







  <meta name="twitter:dnt" content="on">












<meta name="theme-color" content="#222">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">










  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
        
      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
        
      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
        
      
      
    

  

    
    

    
    
      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
        
      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
        
      
      
    

  







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebSite",
        "@id": "https:\/\/tnvmadhav.surge.sh\/"
      },
      "headline": "ðŸ•› Time Progress App",
      "description": "",
      "image": ["https://tnvmadhav.surge.sh/img/cover_hu21e85976c8e314cc3a56b50e959ccf0c_44070_1280x640_fill_box_smart1_2.png","https://tnvmadhav.surge.sh/img/cover_hu21e85976c8e314cc3a56b50e959ccf0c_44070_1200x630_fill_box_smart1_2.png","https://tnvmadhav.surge.sh/img/cover_hu21e85976c8e314cc3a56b50e959ccf0c_44070_1280x0_resize_box_2.png"],
      "url": "https:\/\/tnvmadhav.surge.sh\/posts\/time-progress-app\/",
      "inLanguage": "en",
      "datePublished": "2020-10-18",
      "dateModified": "2020-10-18",
      "wordCount" : "1449",
      "publisher": {
        "@type": "Person",
        "name": "T Venu Madhav"
      },
      "author": {
        "@type": "Person",
        "name": "T Venu Madhav",
        "description": "No matter the era, He moves forward",
        "sameAs": ["https://github.com/tnvmadhav","https://www.instagram.com/TnvMadhav","https://www.linkedin.com/in/venu-madhav-t-075059132","https://twitter.com/TnvMadhav","https://youtube.com/channel/UCVeaCU31DaPy92teIZRILLg"]
      }
    }
  </script>






<link rel="stylesheet" href="/css/main.min.46f9974dbd84e826ea113220f8fa8b1b862024b9588a4940f415ca16bc4e38fb7f345fb5e8881f7e5680d1237f05d359208acd0a4344e76fea4a90135f604c06.css" integrity="sha512-RvmXTb2E6CbqETIg&#43;PqLG4YgJLlYiklA9BXKFrxOOPt/NF&#43;16IgfflaA0SN/BdNZIIrNCkNE52/qSpATX2BMBg==">



<noscript>

  
  

  

    
      <meta name="theme-color" content="#14ba41">
    

  

  <style>
  
    html {
      --accent: #14ba41;
    }
  
    .req-js,
    img.lazyload {
      display: none;
    }
    
  </style>
  
</noscript>






  <link rel="preload" href="/fonts/open-sans-v17-latin-700.woff" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/open-sans-v17-latin-700.woff2" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/open-sans-v17-latin-italic.woff" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/open-sans-v17-latin-italic.woff2" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/open-sans-v17-latin-regular.woff" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/open-sans-v17-latin-regular.woff2" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/oswald-v29-latin-700.woff" as="font" crossorigin="anonymous">

  <link rel="preload" href="/fonts/oswald-v29-latin-700.woff2" as="font" crossorigin="anonymous">





<script defer src="/js/lazysizes.min.min.a85a0eccaf9ef0d2f083a9dc4d0e05dc90acc5be0e84b43e20fde692871e1861ae0191f7c3ca2c00f2664efabf6aff2625a478b8f22ea43cb056cb6ec9a8d948.js" crossorigin="anonymous"></script>








  <link rel="me" href="https://github.com/tnvmadhav"> 

  <link rel="me" href="https://www.instagram.com/TnvMadhav"> 

  <link rel="me" href="https://www.linkedin.com/in/venu-madhav-t-075059132"> 

  <link rel="me" href="https://twitter.com/TnvMadhav"> 

  <link rel="me" href="https://youtube.com/channel/UCVeaCU31DaPy92teIZRILLg"> 







  <script>
    
      'use strict';const ROOT=document.documentElement;const SHEET=document.documentElement.style;const META_THEME_COLOR=document.querySelector('meta[name=theme-color]');function setDark(){ROOT.dataset.mode='dark'};function setLight(){ROOT.dataset.mode='light'};if(localStorage.getItem('isDark')=='true'){setDark()}else if(localStorage.getItem('isDark')=='false'){setLight()};function getAccent(){if(ROOT.dataset.mode==='dark'){if(localStorage.getItem('darkAccent')===null){var currentAccent="#14ba41"}else{var currentAccent=localStorage.getItem('darkAccent')
}}else if(ROOT.dataset.mode==='light'){if(localStorage.getItem('lightAccent')===null){var currentAccent="#225670"}else{var currentAccent=localStorage.getItem('lightAccent')
}};return currentAccent};var activeAccent=getAccent();SHEET.setProperty('--accent',activeAccent);META_THEME_COLOR.setAttribute('content',activeAccent);function updateAccent(){var activeAccent=getAccent();SHEET.setProperty('--accent',activeAccent);PALETTE.value=activeAccent;META_THEME_COLOR.setAttribute('content',activeAccent);};document.addEventListener('DOMContentLoaded',function(){PALETTE.value=activeAccent;function smoothTransition(){document.body.style.transition=document.querySelector('header').style.transition=document.querySelector('footer').style.transition='background-color .3s ease, color .3s ease'};function userModeChange(){smoothTransition();if(ROOT.dataset.mode=='light'){setDark();localStorage.setItem('isDark','true')
}else{setLight();localStorage.setItem('isDark','false')
};updateAccent()};document.querySelector('footer button').addEventListener('click',userModeChange)})
    
  </script>



  </head>

  <body>

    <header>
      

  <a href="/">Venu&#39;s Webstrings</a>




  
    <nav aria-label="Main menu.">
      <ul>
        
          <li>
            <a class="btn" href="/daily_reflection/">Daily Reflection</a>
          </li>
        
          <li>
            <a class="btn" href="/posts/">Posts</a>
          </li>
        
          <li>
            <a class="btn" href="/contact/">Contact</a>
          </li>
        
      </ul>
    </nav>
  


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-177064924-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-177064924-1');
</script>
    </header>

    <div class="filler">
      

  <main>
    <article>
      <header>
        
        <h1>ðŸ•› Time Progress App</h1>

        
          <p>
            
              Published on <time datetime="2020-10-18">2020-10-18</time>
            
          </p>
        
        
        
        
      </header>
    
      
      





















  









  <h1 id="progress-is-being-made">&ldquo;Progress is being made&hellip;&rdquo;</h1> 

<p>It would be really cool to stamp milestones for various types of progress. It could be anything from a projects, careers to vacations. Timestamps are often used to plot the beginning of something and the expected time for something yet to happen or develop. Timestamps can be put on anything to literally mark events  into our calendar. It gives us humans clarity about what can and cannot be done in project/life management.</p>
<p>Breaking down processes into manageable tasks gives us a drive to reach each milestone. These milestones are referenced based on timestamps and this temporal labelling helps us manage better to improve the outcome(s).</p>
<p>Time flows until entropy is levelled and for us humans, time is something we use to tame ourselves by setting up calendars. But more often than not, we tend to underestimate the power of time.</p>
<blockquote>
<p>&ldquo;Time is always moving forward&rdquo;   ~ not John Doe</p>
</blockquote>
<p>To better understand this power, I feel that being reminded about it helps us focus on the goals we set for ourselves.</p>
<p>With this thought, I tried to create a product that does just that.</p>





  <h1 id="time-progress-app">Time Progress App</h1> 

<p>This product reminds a person about the progress made with respect to the current year.  This product blurts out the % year progress that has been made until that point. This was created to remind and in turn possibly help one put themselves or their progress in perspective.</p>
<p>The program blurts out on Twitter at <a href="https://twitter.com/TimeProgressApp">TimeProgressApp</a>.</p>
 <blockquote class="twitter-tweet"><p lang="en" dir="ltr">The Year has progressed:<br> [--------------------||----] 86%</p>&mdash; TimeProgressApp (@TimeProgressApp) <a href="https://twitter.com/TimeProgressApp/status/1326226719532064773?ref_src=twsrc%5Etfw">November 10, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>





  <h1 id="did-you-call-me-here-to-get-preached">Did you call me here to get preached?</h1> 

<p>No,  Let&rsquo;s talk about what is happening inside.</p>
<p>The idea is to be as accurate as possible and that is,</p>
<blockquote>
<p>Spit out the numbers with little to no latency at all.</p>
</blockquote>
<p>I used Golang to manage information and <a href="https://www.heroku.com">Heroku</a> for hosting</p>
<p>The core functionality is divided into the following steps:</p>
<ol>
<li>
<p>Get the progress %</p>
</li>
<li>
<p>Is it something significant to be reminded about?</p>
<p>Yes? Pass along the number</p>
<p>No? Repeat</p>
</li>
</ol>





  <h2 id="get-the-progress-">Get the progress % <a class="anchor" href="#get-the-progress-" title='Anchor for "Get the progress %".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a></h2> 

<p>The progress being made with a chosen time reference( example, a year) can be put as:</p>
<blockquote>
<p>Progress % = (time taken to reach now) / (total time duration) x 100</p>
</blockquote>
<p>This calculation is isolated into a function <code>GetTimeProgress</code>:</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">GetTimeProgress</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="nx">time_year_start</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Date</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Year</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">)</span> <span class="c1">//Time progressed in Hours
</span><span class="c1"></span>	<span class="nx">time_year_end</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Date</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Year</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">)</span> <span class="c1">// Get total time in hours
</span><span class="c1"></span>	<span class="k">return</span> <span class="p">(</span><span class="nb">float64</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Since</span><span class="p">(</span><span class="nx">time_year_start</span><span class="p">).</span><span class="nf">Round</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">))</span><span class="o">/</span> <span class="nb">float64</span><span class="p">(</span><span class="nx">time_year_end</span><span class="p">.</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">time_year_start</span><span class="p">).</span><span class="nf">Round</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">100</span> <span class="c1">// Year Progress
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>




  <h2 id="is-it-something-significant-to-be-reminded-about">Is it something significant to be reminded about? <a class="anchor" href="#is-it-something-significant-to-be-reminded-about" title='Anchor for "Is it something significant to be reminded about?".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a></h2> 

<p>Now the calling function w.r.t <code>GetTimeProgress</code> can give back any value percentage like 1.0304 (%) or 63.2323 (%).  It would be cleaner to output whole numbers but we need the values to be as accurate as possible .</p>
<p>Therefore, we can get the expected behaviour by sending whole numbers when they are returned and we want to capture every whole number.</p>
<p>We are calculating the Progress % based on seconds metric, therefore, we can expect <code>GetTimeProgress</code> function to return whole numbers without significant misses.</p>
<p>So asserting on the whole numbers is the way to go, so something like</p>
<blockquote>
<p>GetTimeProgress() % 10 == 0</p>
</blockquote>
<p>would work with no problems&hellip;</p>
<p>Ok, you know what, I am paranoid, let me consider the possibility of some latency and we get back <code>x.00000003</code> , then the above method wouldn&rsquo;t help.</p>
<p>So let&rsquo;s fix it, I am allowing the latency to be <code>More than 0 or less than 0.00004</code></p>
<p>This will result in something like :</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="nx">answer</span> <span class="o">:=</span> <span class="nf">GetTimeProgress</span><span class="p">()</span>
<span class="nx">latency</span> <span class="o">:=</span> <span class="nx">answer</span> <span class="o">-</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Floor</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span>
<span class="k">if</span> <span class="nx">latency</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">latency</span> <span class="p">&lt;</span> <span class="mf">0.000004</span> <span class="p">{</span>
			<span class="c1">// Pass along the progress %
</span><span class="c1"></span>	<span class="p">}</span>
</code></pre></div><p>We need to do this until the appropriate value is reached, therefore, we can loop this functionality  in an indefinite for loop, we then get</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="k">for</span> <span class="p">{</span>
		<span class="nx">answer</span> <span class="o">:=</span> <span class="nf">GetTimeProgress</span><span class="p">()</span>
		<span class="nx">latency</span> <span class="o">:=</span> <span class="nx">answer</span> <span class="o">-</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Floor</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span>
		<span class="k">if</span> <span class="nx">latency</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">latency</span> <span class="p">&lt;</span> <span class="mf">0.000004</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">answer</span>
		<span class="p">}</span>
	<span class="p">}</span>
</code></pre></div><p>let us give the CPU some time to catch a breath, but we don&rsquo;t want to miss the intended progress % value, so let&rsquo;s add a single second (significant for a CPU) sleep time.</p>
<blockquote>
<p>The latency consideration does in fact help as a second of sleep can possibly be the cause for missing the capture of whole number progress %</p>
</blockquote>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="k">for</span> <span class="p">{</span>
		<span class="nx">answer</span> <span class="o">:=</span> <span class="nf">GetTimeProgress</span><span class="p">()</span>
		<span class="nx">latency</span> <span class="o">:=</span> <span class="nx">answer</span> <span class="o">-</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Floor</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span>
		<span class="k">if</span> <span class="nx">latency</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">latency</span> <span class="p">&lt;</span> <span class="mf">0.000004</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">answer</span>
		<span class="p">}</span>
		<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span>
	<span class="p">}</span>
</code></pre></div><p><strong>Let&rsquo;s wrap this in a function,</strong></p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="c1">// Return the right data
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">IsProgressed</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">answer</span> <span class="o">:=</span> <span class="nf">GetTimeProgress</span><span class="p">()</span>
		<span class="nx">latency</span> <span class="o">:=</span> <span class="nx">answer</span> <span class="o">-</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Floor</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span>
		<span class="c1">// When to return the data...
</span><span class="c1"></span>		<span class="k">if</span> <span class="nx">latency</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">latency</span> <span class="p">&lt;</span> <span class="mf">0.000004</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">answer</span>
		<span class="p">}</span>
		<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Now that we have isolated the logic for calculating time progress (<code>GetTimeProgress</code>) &amp; check for the progress significance (<code>IsProgressed</code>) , we can rely on calling <code>IsProgressed</code> which will return a number when acceptable progress is made.</p>





  <h1 id="design">Design:</h1> 

<p>Now, we have two concerns</p>
<ol>
<li>Make sure that the calling function for <code>IsProgressed</code>  doesn&rsquo;t just exit after getting the number.</li>
<li>Tight coupling of the &lsquo;calculating functionality&rsquo; with &lsquo;handling functionality&rsquo;</li>
</ol>
<p>Say the we are using a third party API to send the progress data, it is better to isolate the API call logic from the calculating logic. The calculating logic is time sensitive (to seconds accuracy) and API calls when are network based would lead to some time overhead.</p>
<p>We can isolate the two functionality with the help of <code>channels</code> and <code>goroutines</code></p>
<p>










  






  
  
    <img
      class="lazyload "
      loading="lazy"
      src="data:image/gif;base64,R0lGODdhAQABAIABAICAgDfSzywAAAAAAQABAAACAkQBADs="
      data-src="https://user-images.githubusercontent.com/17908655/96368409-5fbb0200-1171-11eb-956f-2e88ddc91cdb.png"
      alt="Design Flow"
    />
    
    <noscript>
      <img
        
        loading="lazy"
        src="https://user-images.githubusercontent.com/17908655/96368409-5fbb0200-1171-11eb-956f-2e88ddc91cdb.png"
        alt="Design Flow"
      />
    </noscript>
  
  

</p>
<p><a href="https://tour.golang.org/concurrency/1">Goroutines</a> are light weight threads and channels are messaging pipes (here blocking)  can be used for communication between (concurrently running) go routines. The system is best explained with the above diagram.</p>
<p>The handling go routine (main function) is configured at the receiving end of the channel that waits indefinitely until the channel returns the types value (Progress %)</p>
<p>A <a href="https://tour.golang.org/concurrency/2">Channel</a>  is created using:</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">float64</span><span class="p">)</span>
</code></pre></div><p>A channel can only take in values that are of a specific type (defined during declaration).</p>
<p>A goroutine can be created by just stating  <code>go</code>  keyword before a certain function call, this spawns a separate child routine which executes the function.</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nf">Updated</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
</code></pre></div><p>Here the child  (calculation goroutine) is used to calculate and return the progress % when encountered and produce it into the channel passed as an argument.</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="c1">// calculating goroutine:
</span><span class="c1"></span>
<span class="nx">updateChan</span> <span class="o">&lt;-</span> <span class="nf">IsProgressed</span><span class="p">()</span>
</code></pre></div><p>When the channel is loaded with a value, at the receiving end, the main (handling goroutine) will read the value and move on to make the API call (if any)</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="c1">// handling goroutine:
</span><span class="c1"></span>
<span class="nx">answer</span> <span class="o">:=</span> <span class="o">&lt;-</span> <span class="nx">c</span>

<span class="c1">// Handle the data received from the channel...
</span><span class="c1"></span><span class="nf">sampleApiCall</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span>
</code></pre></div><p>Once the data is consumed from the channel, we then call Twitter API to tweet the progress data.</p>
<p>The Final Code looks like:</p>
<div class="highlight"><pre class="chroma" aria-label="Box containing code sample." tabindex=0><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;time&#34;</span>
	<span class="s">&#34;math&#34;</span>
<span class="p">)</span>

<span class="c1">// Long running data producer
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Updated</span><span class="p">(</span><span class="nx">updateChan</span> <span class="kd">chan</span> <span class="kt">float64</span><span class="p">)</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">updateChan</span> <span class="o">&lt;-</span> <span class="nf">IsProgressed</span><span class="p">()</span>
		<span class="c1">// After milestone is reached, sleep for some time to prevent sending same progress data multiple times...
</span><span class="c1"></span>		<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Hour</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Return the right data
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">IsProgressed</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">answer</span> <span class="o">:=</span> <span class="nf">GetTimeProgress</span><span class="p">()</span>
		<span class="nx">latency</span> <span class="o">:=</span> <span class="nx">answer</span> <span class="o">-</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Floor</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span>
		<span class="c1">// When to return the data...
</span><span class="c1"></span>		<span class="k">if</span> <span class="nx">latency</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">latency</span> <span class="p">&lt;</span> <span class="mf">0.000004</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">answer</span>
		<span class="p">}</span>
		<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Just give me the damn number!
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">GetTimeProgress</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="nx">time_year_start</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Date</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Year</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">)</span> <span class="c1">//Time progressed in Hours
</span><span class="c1"></span>	<span class="nx">time_year_end</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Date</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Year</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">)</span> <span class="c1">// Get total time in hours
</span><span class="c1"></span>	<span class="k">return</span> <span class="p">(</span><span class="nb">float64</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Since</span><span class="p">(</span><span class="nx">time_year_start</span><span class="p">).</span><span class="nf">Round</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">))</span><span class="o">/</span> <span class="nb">float64</span><span class="p">(</span><span class="nx">time_year_end</span><span class="p">.</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">time_year_start</span><span class="p">).</span><span class="nf">Round</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">100</span> <span class="c1">// Year Progress
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// Used to create a simple progress bar using keyboard characters
</span><span class="c1">// Example: [-----||-----]
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">getBitBar</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="nx">myString</span> <span class="o">:=</span> <span class="s">&#34;[&#34;</span>
	<span class="kd">var</span> <span class="nx">value</span> <span class="kt">string</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">25</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="nx">temp_answer</span><span class="p">)</span><span class="o">/</span> <span class="mi">4</span> <span class="p">{</span>
			<span class="nx">value</span> <span class="p">=</span> <span class="s">&#34;||&#34;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">value</span> <span class="p">=</span> <span class="s">&#34;-&#34;</span>
		<span class="p">}</span>
		<span class="nx">myString</span> <span class="o">+=</span> <span class="nx">value</span>
	<span class="p">}</span>
	<span class="nx">myString</span> <span class="o">+=</span> <span class="s">&#34;]&#34;</span>
	<span class="k">return</span> <span class="nx">myString</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Start log...
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Time Progress App&#34;</span><span class="p">)</span>
	<span class="c1">// Create a channel
</span><span class="c1"></span>	<span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">float64</span><span class="p">)</span>
	<span class="c1">// Start a routine in parallel with following statements
</span><span class="c1"></span>	<span class="k">go</span> <span class="nf">Updated</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
	<span class="c1">// Get the result from the routine
</span><span class="c1"></span>	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">answer</span> <span class="o">:=</span> <span class="o">&lt;-</span> <span class="nx">c</span>
		<span class="c1">// Tweet the Result using Twitter API
</span><span class="c1"></span>		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">tweet</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;The Year has progressed:\n %s %d&#34;</span><span class="p">,</span> <span class="nf">getBitBar</span><span class="p">(),</span> <span class="nb">int</span><span class="p">(</span><span class="nx">answer</span><span class="p">))</span> <span class="o">+</span> <span class="s">&#34;%&#34;</span><span class="p">))</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>This is finally deployed on <a href="https://www.heroku.com">Heroku</a> and is currently live at  <a href="https://twitter.com/TimeProgressApp">TimeProgressApp</a>. So make sure to follow ðŸ˜ƒ  to receive time progress %.</p>
<hr>
<p>In the end, this was a little experiment of mine and if you felt this was Insightful, do follow me on Twitter at <a href="https://twitter.com/TnvMadhav">TnvMadhav</a> and let me know ðŸ˜„</p>



    </article>
  </main>


    </div>
    
    <footer>
      

  
    <p>Copyright Â© 2020  T Venu Madhav
All rights reserved.</p>
  












<section class="req-js">
  <button class="outline-dashed" title="Change to light/dark mode."><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><use xlink:href="#adjust"/></svg></button><input class="outline-dashed" type="color" list="presets" value="#14ba41" title="Change accent color." aria-label="Change accent color."><datalist id="presets"><option value="#225670"><option value="#14ba41"><option value="#1f676b"><option value="#f3a530"><option value="#902b37"><option value="#1dbc91"><option value="#754e85"><option value="#7fc121"><option value="#a8314a"><option value="#ff7433"><option value="#3e6728"><option value="#c063bd"></datalist>
</section>



  <noscript>
    <p class="noscript">Unable to execute JavaScript. Some features were disabled.</p>
  </noscript>



    </footer>
    
    <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" aria-hidden="true">
      <symbol viewBox="0 0 512 512" id="adjust">
        <path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/>
      </symbol>
      
      
      
      
  
<symbol viewBox="0 0 448 512" id="hashtag">
  <path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/>
</symbol>


  <symbol viewBox="0 0 320 512" id="caret-down">
    <path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"/>
  </symbol>


      
      
      
    </svg>

    
    
    

      <script>
        
          'use strict';const PALETTE=document.querySelector('footer input');PALETTE.onchange=function(){const PICK=PALETTE.value;SHEET.setProperty('--accent',PICK);if(ROOT.dataset.mode==='light'){localStorage.setItem('lightAccent',PICK)}else{localStorage.setItem('darkAccent',PICK)};updateAccent()};
        
      </script>

    
    
    
    

  </body>
</html>
